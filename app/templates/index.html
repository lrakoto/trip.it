{% extends 'base.html'%}
{% block content %}
<h1>Trip.it Index Page</h1>
<p>HEY{{ googlekey }}</p>
<p>{{ location }}</p>

<div id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js?key={{googlekey}}&callback=initMap&v=weekly" defer></script>

<script>
    let mapData = JSON.parse('{{maps|escapejs}}')
    function initMap() {
        const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 12,
            center: { lat: parseFloat(mapData.mapdata.location.lat), lng: parseFloat(mapData.mapdata.location.lng) }
        });
        const marker = new google.maps.Marker({
            position: { lat: parseFloat(mapData.mapdata.location.lat), lng: parseFloat(mapData.mapdata.location.lng) },
            map: map,
        })
    }
</script>

{% endblock %}