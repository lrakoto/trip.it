{% extends 'base.html'%}
{% block content %}
<h1>Trip.it Index Page</h1>
<p>HEY{{ googlekey }}</p>
<p>{{ location }}</p>

<div id="map"></div>
<script src="https://maps.googleapis.com/maps/api/js?key={{googlekey}}&callback=initMap&v=weekly" defer></script>

<div style="margin: 5%;">
    <h1>
        <u>Dictionary Data</u>
    </h1>
    <h2>
        <u>All Data</u>
    </h2>
    <h4 id='alldata'></h4><br>
    <h2>
        <u>Neat Data</u>
    </h2>
    <h4 id='neatdata'></h4>
</div>
<script>
    let mapData = JSON.parse('{{maps|escapejs}}')
    console.log('MAPDATA>>>>>>>>>', mapData)
    console.log('MAPDATA2>>>>>>>>>', mapData.mapdata.location.lat)
    function initMap() {
        const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 4,
            center: { lat: parseFloat(mapData.mapdata.location.lat), lng: parseFloat(mapData.mapdata.location.lng) }
        });
        const marker = new google.maps.Marker({
            position: { lat: parseFloat(mapData.mapdata.location.lat), lng: parseFloat(mapData.mapdata.location.lng) },
            map: map,
        })
    }
</script>
<script>
    let data = JSON.parse("{{data|escapejs}}");
    let dataNode = document.getElementById('alldata');
    dataNode.innerHTML += "{{data|escapejs}}";
    dataNode = document.getElementById('neatdata');
    for (let x in data) {
        dataNode.innerHTML += x + ' : ' + data[x] + '<br><br>';
    }
</script>

{% endblock %}